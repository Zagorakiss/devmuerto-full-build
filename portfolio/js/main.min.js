jQuery(document).ready(function(){function e(n){n.length>0&&setTimeout(function(){n.addClass("slides-in"),e(n.next())},50)}function n(){return window.getComputedStyle(document.querySelector(".cd-projects-wrapper"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function i(){var e=n();if("desktop"==e){var i=d.children("li"),s=i.eq(0).width(),t=Number(d.children("li").eq(1).css("margin-left").replace("px","")),r=(s+t)*(i.length+1)+"px",a=d.children("li.current").index();d.css("width",r),0!=a&&l(d,a*(s+t)+"px")}else d.css("width",""),l(d,0);u=!1}function s(e){var n=e.children(".current"),i=n.index(),s=n.nextAll("li").length,t=n.width(),a=Number(e.children("li").eq(1).css("margin-left").replace("px",""));i=s>4?i+3:i+s-2,translate=i*(t+a)+"px",e.addClass("next"),l(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r("next",n,e,s)}),$(".no-csstransitions").length>0&&r("next",n,e,s)}function t(e){var n=e.children(".previous"),i=n.index(),s=n.width(),t=Number(e.children("li").eq(1).css("margin-left").replace("px",""));translate=i*(s+t)+"px",e.addClass("prev"),l(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r("prev",n,e)}),$(".no-csstransitions").length>0&&r("prev",n,e)}function r(e,n,i,s){"next"==e?(i.removeClass("next").find(".previous").removeClass("previous"),n.removeClass("current"),s>4?n.addClass("previous").next("li").next("li").next("li").addClass("current"):4==s?n.next("li").next("li").addClass("current").prev("li").prev("li").addClass("previous"):n.next("li").addClass("current").end().addClass("previous")):(i.removeClass("prev").find(".current").removeClass("current"),n.removeClass("previous").addClass("current"),n.prevAll("li").length>2?n.prev("li").prev("li").prev("li").addClass("previous"):!i.children("li").eq(0).hasClass("current")&&i.children("li").eq(0).addClass("previous")),a()}function a(){var e=c.find("li.current");e.is(":first-child")?p.find(".prev").addClass("inactive"):p.find(".prev").removeClass("inactive"),e.nextAll("li").length<3?p.find(".next").addClass("inactive"):p.find(".next").removeClass("inactive")}function l(e,n){e.css({"-moz-transform":"translateX(-"+n+")","-webkit-transform":"translateX(-"+n+")","-ms-transform":"translateX(-"+n+")","-o-transform":"translateX(-"+n+")",transform:"translateX(-"+n+")"})}var o=$(".cd-intro-block"),c=$(".cd-projects-wrapper"),d=c.children(".cd-slider"),v=$(".cd-project-content"),p=$(".cd-slider-navigation"),u=!1;i(),$(window).on("resize",function(){u||(window.requestAnimationFrame?window.requestAnimationFrame(i):i(),u=!0)}),o.on("click",'a[data-action="show-projects"]',function(n){n.preventDefault(),o.addClass("projects-visible"),c.addClass("projects-visible"),setTimeout(function(){e(d.children("li").eq(0))},200)}),o.on("click",function(e){o.hasClass("projects-visible")&&!$(e.target).is('a[data-action="show-projects"]')&&(o.removeClass("projects-visible"),c.removeClass("projects-visible"))}),c.on("click",".cd-slider a",function(e){var i=n();if(e.preventDefault(),$(this).parent("li").next("li").is(".current")&&"desktop"==i)t(d);else if($(this).parent("li").prev("li").prev("li").prev("li").is(".current")&&"desktop"==i)s(d);else{var r=jQuery(this).attr("href");jQuery(""+r).addClass("is-visible")}}),v.on("click",".close",function(e){e.preventDefault(),v.removeClass("is-visible")}),p.on("click",".next",function(){s(d)}),p.on("click",".prev",function(){t(d)}),$(document).keyup(function(e){var i=n();"37"==e.which&&o.hasClass("projects-visible")&&!p.find(".prev").hasClass("inactive")&&"desktop"==i?t(d):"39"==e.which&&o.hasClass("projects-visible")&&!p.find(".next").hasClass("inactive")&&"desktop"==i?s(d):"27"==e.which&&v.hasClass("is-visible")&&v.removeClass("is-visible")}),d.on("swipeleft",function(){var e=n();p.find(".next").hasClass("inactive")||"desktop"!=e||s(d)}),d.on("swiperight",function(){var e=n();p.find(".prev").hasClass("inactive")||"desktop"!=e||t(d)})});
